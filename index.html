<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="dark">
    <title>Music Theory</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>??/text></svg>">
    <link rel="stylesheet" href="style.css?v=1.0.1">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-container">
            <div class="loading-spinner"></div>
            <p class="loading-text">Loading Music Theory...</p>
        </div>
    </div>

    <div class="container">
        <header>
            <h1 id="pageTitle">Music Theory</h1>
            <button id="backBtn" class="back-btn" style="display: none;">??/button>
        </header>

        <main id="mainContent">
            <!-- HOME PAGE -->
            <section id="homePage" class="page-section">
                <section class="content-area" style="text-align: center;">
                    <h2 class="fancy-title">Welcome to Fantasia</h2>
                    <p id="siteDescription" style="cursor: pointer;">Every Day ??Music Day ~ !</p>
                    <p style="margin-top: 20px; color: #ffd6d6; font-size: 0.9em; display: flex; align-items: center; justify-content: center; gap: 10px;">
                        By Aino
                        <button id="editDescBtn" class="icon-edit-btn" style="display: none;">?èÔ?</button>
                    </p>
                </section>

                <div class="nav-boxes-container">
                    <a href="chord-progression.html" class="nav-box-card">
                        <div class="nav-box-icon">?éº</div>
                        <div class="nav-box-title">Chord Progression</div>
                    </a>
                    <a href="music-theory.html" class="nav-box-card">
                        <div class="nav-box-icon">?éπ</div>
                        <div class="nav-box-title">Music Theory</div>
                    </a>
                </div>
            </section>

            <!-- CHORD PROGRESSION PAGE -->
            <section id="chordProgressionPage" class="page-section" style="display: none;">
                <div id="progressionControls" class="progression-controls"></div>
                <div id="progressionsList" class="progressions-list">
                    <!-- Progressions render here -->
                </div>
            </section>

            <!-- PROGRESSION INFO PAGE -->
            <section id="progressionInfoPage" class="page-section" style="display: none;">
                <div class="detail-controls" id="detailControls"></div>
                <div class="detail-content" id="detailContent">
                    <!-- Detail content will be loaded here -->
                </div>
            </section>

            <!-- MUSIC THEORY PAGE -->
            <section id="musicTheoryPage" class="page-section" style="display: none;">
                <div class="theory-list-container" id="theoryList">
                    <!-- Theory list will be loaded here -->
                </div>
            </section>
        </main>

        <footer>
            <p>&copy; 2026 Music Theory Learning. Happy learning! ?é∂</p>
            <div class="sounds-control-panel">
                <div class="sound-section">
                    <div class="sound-header">
                        <button id="musicToggleBtn" class="sound-btn">?éµ Music</button>
                        <input type="range" id="volumeSlider" class="sound-slider" min="0" max="100" value="15">
                        <span id="volumeLabel" class="sound-label">15%</span>
                    </div>
                </div>
                <div class="sound-section">
                    <div class="sound-header">
                        <button id="sfxToggleBtn" class="sound-btn">?? SFX</button>
                        <input type="range" id="sfxSlider" class="sound-slider" min="0" max="100" value="50">
                        <span id="sfxLabel" class="sound-label">50%</span>
                    </div>
                </div>
                <div class="sound-section">
                    <button onclick="manualSaveData()" class="sound-btn" style="font-size: 0.9em;">?íæ Save Data</button>
                </div>
                <div class="sound-section" id="ownerModeSection">
                    <button onclick="toggleOwnerMode()" class="sound-btn" id="ownerModeToggle" style="font-size: 0.9em;">?? Unlock Owner</button>
                </div>
            </div>
        </footer>
    </div>

    <script src="db.js?v=1.0.1"></script>
    <script src="sounds.js?v=1.0.1"></script>
    <script src="router.js?v=1.0.1"></script>
    <script src="script.js?v=1.0.1"></script>
    <script src="theory-index.js?v=1.0.1"></script>
    <script src="progression-info.js?v=1.0.1"></script>
    
    <script>
        // Hide loading screen when page is fully loaded
        function hideLoadingScreen() {
            const loadingScreen = document.getElementById('loadingScreen');
            if (loadingScreen) {
                loadingScreen.classList.add('hidden');
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                }, 500);
            }
        }
        
        // Update owner mode button text based on current state
        function updateOwnerModeButton() {
            const btn = document.getElementById('ownerModeToggle');
            if (btn) {
                btn.textContent = EDIT_UI_ENABLED ? '?? Lock Owner' : '?? Unlock Owner';
                btn.onclick = EDIT_UI_ENABLED ? disableOwnerMode : toggleOwnerMode;
            }
        }
        
        // Hide loading screen when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            hideLoadingScreen();
            updateOwnerModeButton();
        });
        
        // Also hide when all resources are loaded
        window.addEventListener('load', hideLoadingScreen);
        
        // Failsafe: hide after 5 seconds anyway
        setTimeout(hideLoadingScreen, 5000);
    </script>
</body>
</html>

